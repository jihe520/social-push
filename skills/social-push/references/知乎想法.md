## 发布知乎想法 workflow

1. 打开知乎首页：`agent-browser --state ~/my-state.json --headed open "https://www.zhihu.com/"`
2. 查看交互元素：`agent-browser snapshot -i`
3. 点击"发想法"按钮：`agent-browser click @e25`（ref可能变化，需要从snapshot确认）
4. 查看发布界面：`agent-browser snapshot -i`
5. 填写标题：`agent-browser fill @e20 "{标题}"`
6. 输入想法内容：`agent-browser type ".public-DraftEditor-content" "{内容}"`
7. （可选）上传图片：点击工具栏图片按钮或使用剪贴板粘贴
   ```bash
   # 方法：将图片复制到剪贴板后粘贴
   osascript -e 'set the clipboard to (read (POSIX file "{图片路径}") as «class PNGf»)'
   agent-browser click ".public-DraftEditor-content"
   agent-browser press "Meta+v"
   ```
8. 查看当前状态：`agent-browser snapshot -i`
9. 关闭发布界面并自动保存草稿：`agent-browser press "Escape"`
10. 提示用户手动打开草稿箱确认并发布，不自动点击"发布"按钮

## 元素参考

| 元素 | 功能 | 说明 |
|------|------|------|
| @e25 | "发想法"按钮 | 首页上的按钮，ref可能变化 |
| @e20 | 标题输入框 | textarea，placeholder="标题" |
| .public-DraftEditor-content | 内容编辑区 | contenteditable div，使用Draft.js编辑器 |
| @e27 | 发布按钮 | 输入内容后从disabled变为enabled |

## 注意事项

- 标题是必填的，需要在发布前填写
- 内容编辑区使用Draft.js编辑器，是一个contenteditable的div
- 按Escape键会关闭发布界面，内容会自动保存到草稿箱
- 草稿可以在"草稿箱"链接中查看和继续编辑
- 图片可以通过剪贴板粘贴的方式上传
- 元素ref会随页面状态变化，每步操作后建议使用`agent-browser snapshot -i`确认

## 登录问题

如果无法直接使用agent-browser登录知乎，使用以下方法：

```bash
# 1. 启动Chrome调试模式
open "/Applications/Google Chrome for Testing.app" --args --remote-debugging-port=9222

# 2. 获取WebSocket地址
sleep 2 && curl -s http://localhost:9222/json/version

# 3. 连接到浏览器
agent-browser connect "ws://localhost:9222/devtools/browser/xxx"

# 4. 手动登录知乎后保存状态
agent-browser state save ~/my-state.json
```

## 草稿管理

- 按Escape键关闭发布界面后，内容会自动保存为草稿
- 可以通过首页右侧的"草稿箱"链接访问所有草稿
- 草稿可以继续编辑或直接发布
